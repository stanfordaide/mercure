{
    "appliance_name"             : "master",
    "appliance_color"            :   "#FFF",
    "port"                       :    11112,
    "accept_compressed_images"   :    false,
    "support_root_modules"       :    false,
    "incoming_folder"            : "/opt/mercure/data/incoming",
    "studies_folder"             : "/opt/mercure/data/studies",
    "outgoing_folder"            : "/opt/mercure/data/outgoing",
    "success_folder"             : "/opt/mercure/data/success",
    "error_folder"               : "/opt/mercure/data/error",
    "discard_folder"             : "/opt/mercure/data/discard",
    "processing_folder"          : "/opt/mercure/data/processing",
    "jobs_folder"                : "/opt/mercure/data/jobs",
    "bookkeeper"                 : "0.0.0.0:8080",
    "bookkeeper_api_key"         : "BOOKKEEPER_TOKEN_PLACEHOLDER",
    "graphite_ip"                :       "",
    "graphite_port"              :     2003,
    "influxdb_host"              :       "",
    "influxdb_org"               :       "",
    "influxdb_token"             :       "",
    "influxdb_bucket"            :       "",
    "router_scan_interval"       :        1,
    "series_complete_trigger"    :       60,
    "study_complete_trigger"     :      900,
    "study_forcecomplete_trigger":     5400,
    "dispatcher_scan_interval"   :        1,
    "retry_delay"                :      900,
    "retry_max"                  :        5,
    "cleaner_scan_interval"      :       60,
    "retention"                  :   259200,
    "offpeak_start"              :  "22:00",
    "offpeak_end"                :  "06:00",
    "emergency_clean_percentage" :       90,
    "phi_notifications"          :    false,
    "server_time"                :    "America/Los_Angeles",
    "local_time"                 :    "America/Los_Angeles",    
    "targets": {
        "OrthancLPCH": {
            "target_type": "dicom",
            "contact": "",
            "comment": "",
            "direction": "both",
            "ip": "172.17.0.1",
            "port": "4242",
            "aet_target": "ORTHANC_LPCH",
            "aet_source": "MERCURE",
            "pass_sender_aet": false,
            "pass_receiver_aet": false
        }
    },
    "rules": {
        "LegLengthRule": {
            "rule": "tags.StudyDescription == \"LPCH XR EXTREMITY BILATERAL BONE LENGTH\"",
            "target": [
                "OrthancLPCH"
            ],
            "disabled": false,
            "fallback": false,
            "contact": "",
            "comment": "Default rule: tags.StudyDescription == \"LPCH XR EXTREMITY BILATERAL BONE LENGTH\"",
            "tags": "",
            "action": "both",
            "action_trigger": "series",
            "study_trigger_condition": "timeout",
            "study_force_completion_action": "discard",
            "study_trigger_series": "",
            "priority": "normal",
            "processing_module": [
                "PediatricLegLength"
            ],
            "processing_settings": {},
            "processing_retain_images": false,
            "notification_email": "",
            "notification_webhook": "",
            "notification_payload": "",
            "notification_payload_body": "Rule \"{{ rule }}\" triggered {{ event }}\r\n{% if details is defined and details|length %}\r\nDetails:\r\n{{ details }}\r\n{% endif %}",
            "notification_email_body": "Rule \"{{ rule }}\" triggered {{ event }}\r\nName: {{ patient_name }}\r\nACC: {{ acc }}\r\nMRN: {{ mrn }}\r\n{% if details is defined and details|length %}\r\nDetails:\r\n{{ details }}\r\n{% endif %}",
            "notification_email_type": "plain",
            "notification_trigger_reception": true,
            "notification_trigger_completion": true,
            "notification_trigger_completion_on_request": false,
            "notification_trigger_error": true
        }
    },
    "modules": {
        "PediatricLegLength": {
            "docker_tag": "stanfordaide/pediatric-leglength:latest",
            "additional_volumes": "",
            "environment": "",
            "docker_arguments": "",
            "settings": {
                "mode": "ensemble",
                "model": "resnet101",
                "ensemble_models": [
                    "resnet101",
                    "resnext101_32x8d",
                    "vit_l_16"
                ],
                "conf_threshold": 0.1,
                "enable_disagreement": true,
                "detection_weight": 0.5,
                "outlier_weight": 0.35,
                "localization_weight": 0.15,
                "series_offset": 1000
            },
            "contact": "arogya@stanford.edu",
            "comment": "Pediatric Leg Length Module",
            "constraints": "",
            "resources": "",
            "requires_root": false
        }
    }
}